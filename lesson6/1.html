<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Homework</title>
  <style>
    .product {
      width: 200px;
      padding: 10px;
      float: left;
      margin-right: 30px;
      box-shadow: 0 0 4px black;
    }
  </style>
</head>

<body>
  <!--
Обязательное задание.

Выполнить все задачи в теге script. Комментарии, в которых написаны задачи, не
стирать, код с решением задачи пишем под комментарием.
-->
  <div class="product">
    <div class="productName">Товар 1</div>
    <img src="https://picsum.photos/id/367/200/300" alt="">
    <button>В корзину</button>
  </div>
  <div class="product">
    <div class="productName">Товар 2</div>
    <img src="https://picsum.photos/id/425/200/300" alt="">
    <button>В корзину</button>
  </div>
  <div class="product">
    <div class="productName">Товар 3</div>
    <img src="https://picsum.photos/id/429/200/300" alt="">
    <button>В корзину</button>
  </div>

  <script>
    "use strict";

    /*
    1. Установите всем элементам с классом "productName" размер шрифта 24px.
     */
    console.log('1');
    const els = document.querySelectorAll('.productName');
    for (let i = 0; i < els.length; i++) {
      console.log(els[i]);
      els[i].style.cssText = 'font-size: 24px';
    }

    /*
    2. Установите всем элементам с классом "product" внешний отступ справа 50px.
     */
    console.log('2');
    const prods = document.querySelectorAll('.product');
    for (let i = 0; i < prods.length; i++) {
      console.log(prods[i]);
      prods[i].style.cssText = 'margin-right: 50px;';
    }

    /*
    3. При клике на кнопку "В корзину" название кнопки должно поменяться на
    "Добавлено" и кнопка должна стать неактивной.
     */
    console.log('3');

    const inBinEls = document.querySelectorAll('button');

    for (let i = 0; i < inBinEls.length; i++) {
      inBinEls[i].addEventListener('click', event => {
        inBinEls[i].innerText = 'Добавлено';
        inBinEls[i].disabled = true;
      })
    };

    /*
    4. Создайте полную (глубокую) копию элемента с классом product, измените в
    этой копии путь до картинки на:
    https://picsum.photos/id/1080/200/300
    Поставьте название товара в данной копии "Товар 4" и замените последний
    отображенный товар на странице на созданную копию. У данной копии также
    должен правильно работать код из 3-го задания.
     */
    console.log('4');

    const linkItem = 'https://picsum.photos/id/1080/200/300';
    const titleItem = 'Товар 4';
    const replaceItem = prods.length - 1;

    const itemNew = new Item('.product', linkItem, titleItem, replaceItem);

    function Item(selector, link, text, position) {
      const elBase2 = document.querySelector(selector);

      const elClone2 = elBase2.cloneNode(true);

      elClone2.children[1].src = link;
      elClone2.children[0].innerText = text;
      prods[position].replaceWith(elClone2);

      elClone2.addEventListener('click', event => {
        elClone2.children[2].innerText = 'Добавлено';
        elClone2.children[2].disabled = true;
      });
    }


    /*
    5. По истечению 2 секунд с момента открытия страницы первый товар должен быть
    удален из html.
     */
    console.log('---5---');

    let t = 0;
    const durationInSec = 2; // задержка в секундах
    const itemToHide = 1; // 1, 2, 3... - номера товаров


    function hideItem(position, duration) {
      setTimeout(() => {
        prods[position].outerHTML = '';
        t = performance.now();
        console.log(`конец - ${Math.round(t/100)/10}`);
      }, duration * 1000);
    }

    window.addEventListener('load', function () {
      t = performance.now();
      console.log(`начало - ${Math.round(t/100)/10}`);
      hideItem(itemToHide - 1, durationInSec);
    });
  </script>
</body>

</html>